<template>
    <div style="background:#16325c">
        <article class="slds-card slds-card_boundary">
            <div class="slds-page-header slds-text-color_inverse" style="background:#16325c">
              <header class="slds-media slds-media_center slds-has-flexi-truncate">
                <lightning-icon icon-name="standard:contact" size="small" ></lightning-icon>
                <div class="slds-media__body">
                    <h2 class="slds-card__header-title slds-p-left_small">
                        <span class="slds-card__header-title">Local Contacts</span>
                    </h2>
                </div>
                </header>
                <h2 class="slds-p-top_x-small">
                    <p>{totalNumberOfRows} items. These Contacts are pulled in from matching City/State OR Zip/Postal Code</p>
                </h2>
            </div>
            <div class="slds-card__body slds-m-top_none">
                <template if:true={data}>
                    <!-- <div class="slds-table--header-fixed_container slds-p-top_none" style="max-height:400px;overflow:auto;"> -->
                        <div class="slds-table--header-fixed_container slds-p-top_none" style={datatableHeight}>
                        <div class="slds-scrollable_y" style="height:100%;">
                            <lightning-datatable
                                key-field = "Id"
                                data = {data}
                                columns = {columns}
                                hide-checkbox-column = "true"
                                show-row-number-column = "true"
                                default-sort-direction = {defaultSortDirection}
                                sorted-direction = {sortDirection}
                                sorted-by = {sortBy}
                                onsort = {doSorting}
                                onrowaction = {handleRowActions}
                                enable-infinite-loading ="true"
                                onloadmore = {loadMoreData}
                                load-more-offset = "30">
                            </lightning-datatable>
                        </div>
                    </div>
                </template>
                <template if:true={showLoadingSpinner}>
                    <lightning-spinner alternative-text="Loading State Opportunities..." variant="brand"></lightning-spinner>
                </template>
                <template if:true={error}>
                    <div class="slds-text-color_error slds-text-heading_medium slds-p-top_medium slds-p-left_small">
                        An error occurred while loading data. 
                        <p> {error}</p>
                    </div>
                </template>
            </div>
          </article>
    </div>
</template>

<!-- <template>
    <div style="padding:0.5rem;background:#16325c;">
    <lightning-card icon-name="standard:contact" title="Local Contacts">
        <p class="slds-p-horizontal_small">{totalRecords} These Contacts are pulled in from matching City/State OR Zip/Postal Code</p>
        <template if:true={result}>
            <div class="slds-table--header-fixed_container slds-p-top_x-small" style="max-height: 12rem;">
                <div class="slds-scrollable" style="height:100%;">
                <lightning-datatable 
                    key-field = "Id"
                    data = {result}
                    columns = {columnsList}
                    hide-checkbox-column = "true"
                    show-row-number-column = "true"
                    default-sort-direction={defaultSortDirection}
                    sorted-direction={sortDirection}
                    sorted-by={sortBy}
                    onsort={doSorting}
                    onrowaction={handleRowActions}>
                </lightning-datatable>
                </div>
            </div>                
        </template>
        <template if:true={showLoadingSpinner}>
            <lightning-spinner alternative-text="Loading..." variant="brand"></lightning-spinner>
        </template>        
        <template if:true={errors}>
            <div class="slds-text-color_error"></div>
                An error occurred while loading the data. <br> {errors}
            </div>    
        </template>
    </lightning-card>
</div>
</template> -->